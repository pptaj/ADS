{
    "collab_server" : "",
    "contents" : "#https://www.kaggle.com/msjgriffiths/d/benhamner/nips-2015-papers/nips-author-affiliations\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(readr)\nlibrary(ggplot2)\nlibrary(httr)\nlibrary(rvest)\nlibrary(stringr)\n  \n# Useful libraries\nlibrary(igraph)\nlibrary(devtools)\ninstall_github(\"proxy\")\n#library(proxy)\n\n# Pretty-printing\nlibrary(DT)\nlibrary(formattable)\n\nauthors <- read.csv(\"release-2016-02-29-02-26-09/output/Authors.csv\")\npaperauthors <- read_csv(\"release-2016-02-29-02-26-09/output/PaperAuthors.csv\")\npapers <- read_csv(\"release-2016-02-29-02-26-09/output/Papers.csv\")\n\n\n## Double check the count of the papers with the actual page by scrapping\n\nurl = \"release-2016-02-29-02-26-09/output/accepted_papers.html\"\npage <- read_html(url)\n\n\n# count papers\n\npage %>% html_nodes(xpath = './/*[contains(@id, \"main\")]//i') -> nips.page.papers\n\ndata.frame(`KagglePapers` = nrow(papers),\n           `AcceptedPapers` = length(nips.page.papers)) %>%\n  mutate(`Equal` = `KagglePapers` == `AcceptedPapers`) %>%\n  formattable(list(\n    Equal = formatter(\"span\", \n                      style = x ~ style(color = ifelse(x, \"green\", \"red\")),\n                      x ~ icontext(ifelse(x, \"ok\", \"remove\"), ifelse(x, \"Yes\", \"No\")))\n  ), \n  align = \"l\")\n\n\n## Getting page headers from above which are in \n\npage %>%\n  html_nodes(xpath = './/*[contains(@id, \"main\")]//b') %>%\n  html_text() -> \n  page_authors\n\ncat(head(page_authors))\n\n\n## lets clean the page_authors\npage_authors %>%\n  str_split(\";\") %>% unlist %>% str_split(\",\",2) %>% unlist %>% trimws %>% \n    str_replace(\"\\\\*\",\"\") %>% \n      matrix(ncol=2, byrow = T,dimnames = list(NULL,c(\"Name\",\"Institution\"))) %>%\n        as.data.frame -> authors_instituions\n\nhead(authors_instituions) %>% format_table(align = 'l')\n\n## Does it match the Kaggle Authors\n\ndata.frame(\n  KaggleAuthors = nrow(authors),\n  AcceptedPapers = nrow(authors_instituions)\n) %>%\n  mutate(Equal = KaggleAuthors == AcceptedPapers) %>%\n  formattable(list(\n    Equal = formatter(\"span\", \n                      style = x ~ style(color = ifelse(x, \"green\", \"red\")),\n                      x ~ icontext(ifelse(x, \"ok\", \"remove\"), ifelse(x, \"Yes\", \"No\")))\n  ), \n  align = \"l\")\n\n## so it does not match. To learn more about who we’re missing, we need to match up the two tables.\n\n  authors %>% left_join(authors_instituions) %>% \n    mutate(is_matched = !is.na(Institution)) %>%\n    group_by(is_matched) %>%\n    summarise(authors = n()) %>%\n    formattable(list(authors = color_bar(\"orange\")), align = 'l')\n\n## 251 records are matching. We can drill down more\n  \n  authors_instituions %>%\n    group_by(Name) %>%\n    filter(n_distinct(Institution) > 1) %>% \n    arrange(Name) \n\n# It looks like:\n#   \n#   Some authors appear multiple times.\n#   Some authors don’t have a listed affiliation.\n# For the first case, we don’t want to keep duplicate information;\n#  but in the second case, the fact than an author is either unaffiliated or unknown could be useful.  \n\n## Removing duplicates   \n  authors_instituions <- authors_instituions %>%  distinct\n  \n  \n  authors_instituions %>%\n    group_by(Name) %>%\n    filter(n_distinct(Institution) > 1) %>% \n    arrange(Name)\n  \n# Moving on  \n  authors %>% \n    left_join(authors_instituions) %>%\n    mutate(is_matched = !is.na(Institution)) %>%\n    group_by(is_matched) %>%\n    summarise(count = n())\n \n## checking which author did not match \n  authors_instituions %>% anti_join(authors) -> authors_failed_match\n  nrow(authors_failed_match)\n  head(authors_failed_match)\n  \n## Approximate name matching technique using Levenshtein distance!\n\n## Trying to guess failed matches with the original matches\n  failed_names <- as.character(authors_failed_match$Name) %>% trimws\n  to_match_names <- authors %>% anti_join(authors_instituions) %>% .[[\"Name\"]] %>% trimws\n\n  costs = list(insertions = 3, deletions = 1, substitutions = 2)\n  fuzzy_match <- adist(to_match_names, failed_names, costs = costs, ignore.case = T)\n  match_cost <- apply(fuzzy_match, 1, min)\n  data.frame(\n    ToMatch = to_match_names, \n    Failed_Match = failed_names[apply(fuzzy_match, 1, which.min)], \n    Cost = match_cost) %>% \n    arrange(Cost) -> \n    approximate_matches\n\n## APproximately same\napproximate_matches %>% head(15)\n  \n## Matches with a cost of below 7 looks the same\ncorrect_matches <- approximate_matches %>%\n  filter(Cost <= 7, !(ToMatch %in% c(\"Andres Munoz\", \"David Schlegel\")) )\ndim(correct_matches)\n\n# Define coalesce from SQL\ncoalesce <- function(x, y){ifelse(is.na(x), y, x)}\n\n\nauthors %>%\n  left_join(correct_matches, by = c(\"Name\" = \"ToMatch\")) %>%\n  mutate(MatchKey = coalesce(as.character(Failed_Match), Name)) %>%\n  left_join(authors_instituions, by = c(\"MatchKey\" = \"Name\")) %>%\n  select(-Failed_Match, -Cost, -MatchKey) ->\n  authors_with_affiliations\n\nhead(authors_with_affiliations)\n\n## Counting the number of authors per institution\nauthors_with_affiliations %>%\n  group_by(Institution) %>%\n  summarise(Authors = n()) %>%\n  arrange(desc(Authors)) %>%\n  head(20) %>%\n  formattable(list(Authors = color_bar(\"orange\")), align = 'l')\n# \n# However: notice we have Google Deepmind in at #10. That’s interesting. Why are they separate?\n# \n# We also have Stanford in at #19 - that should really roll up to Stanford.\n# \n#    \n# Recode the blank / null value\n# Do some cleanup of the Institution name.\n\nauthors_with_affiliations %>%\n  mutate(Institution = as.character(Institution),\n         Institution = ifelse(Institution == \"\", NA, Institution)\n  ) ->\n  authors_with_affiliations\n\n###\ninstitution_cleanup <- data.frame(\n  before = c('Stanford University', 'Carnegie Mellon University', 'Princeton University', 'Google DeepMind', 'Microsoft Research', 'University of Texas at Austin', 'New York University', 'Harvard University', 'Google, Inc.', 'Facebook AI research', 'University of Cambridge', 'stanford.edu', 'IBM Research-Almaden', 'Microsoft Research, Redmond, WA', 'IBM Research', 'University of Oxford', 'Duke', 'Massachusetts Institute of Technology', 'U. Montreal', 'Yahoo Labs', 'Adobe Research', '\"University of Washington, Seattle\"', 'UTexas-Austin', 'Columbia', 'INRIA - ENS', 'INRIA Lille - Nord Europe', 'University of Texas at Dallas', 'Gatsby unit, UCL', 'Cornell', 'UniversitÃ© de MontrÃ©al', 'Google Research', 'McGill University, Montreal', 'Chalmers University, Sweden', 'Microsoft Research Asia', 'Microsoft Research India', 'Washington University in STL', 'Â ', 'MIT Lincoln Laboratory', 'U. Toronto', 'Nokia Labs', 'University of Illinois at Chic', 'University of Illinois, Urbana-Champaign', 'University of Michigan-Ann Arbor', 'Xerox Research Centre Europe', 'UT Dallas', 'Microsoft Research, Redmond, W', 'UMich', 'MSR', 'MSR-INRIA', 'Ã‰cole Polytechnique MontrÃ©al', 'UniversitÃ© de Saint-Etienne', 'DeepMind', 'University of California, San Diego', 'Disney Research Pittsburgh', 'INRIA/ENS', '\"University of Technology, Sydney\"', 'Dr.', 'neuroscience', 'Google Inc.', 'Institut Mines-TÃ©lÃ©com, TÃ©lÃ©com ParisTech, CNRS LTCI', 'CIN, University TÃ¼bingen', 'MIT Mathematics', 'IBM Research, Ireland', 'Washington University in St Lo', 'Oxford University', 'Universit? de Montr?al', 'Parietal Team, INRIA', 'UniversitÃ© Pierre et Marie Curie (UPMC)', 'Polytechnique MontrÃ©al', 'Duke Univiersity', 'University of California, Davi', 'Google Inc', 'Princeton Neuroscience Inst.', 'Princeton Neuroscience Institute', '\"\"\"University of Washington, Seattle\"\"\"', 'google.com', 'University of Minnesota -- Twin Cities', 'Chalmers University of Technology, GÃ¶teborg', 'Microsoft.com', 'RENSSELAER POLYTECHNIC INST', 'University of Tech., Sydney', 'Rensselaer Polytechnic Inst.', 'Royal Holloway, Univ of London', 'University of Wisconsin, Madison', 'University Washington', 'Rugters University', 'UTDallas', 'Rutgers University', 'UW, Madison', 'Washington', 'Saarlanduniversity', 'MPI T?bingen', 'Samsung Research', 'Georgia Institute of Technolog', 'IIT-MIT', 'Shell Intl. E&P Inc.', 'Georgia Tech.', 'Simons Center for Data Analysi', 'Marburguniversity', 'Uni', 'Universit de MontrÃ©al', 'Mass. Institute of Technology', 'Adobe Research & INRIA', 'UniversitÃ© Paris Dauphine', 'Athens University of Economics and Business', 'Universite de Montreal', 'Stanford University & NVIDIA', 'University Collage London', 'Courant Institute and Google', 'University of California, Davis', 'Johnshopkins', 'TÃ©lÃ©com ParisTech', 'University of Columbia', 'CRIPAC, CASIA', 'IBM Thomas J. Watson Research Center', 'University of McGill', 'University of Michigan Ann Arb', 'Microsoft Research New York', 'Yale', 'UNIVERSITY OF MINNESOTA, TC', 'CMLA, ENS Cachan', 'The University of New South Wales', 'The University of Sheffield', 'University of TÃ¼bingen', 'Coloradoschoolofmines', 'Harvard Unviersity', 'Ttic', 'MIT CSAIL', 'University of Wisconsin - Madison', 'University of Wisconsin-Madiso', 'Cambridge University', 'U C Berkeley', 'U Texas', 'Utaustin', 'U. Amsterdam', 'MPI for Intelligent Systems', 'U. Michigan', 'UW Madison', 'UW-Madison', 'MPI Informatics', 'Washington Univ. in St. Louis', 'UC Berkeley / Google', 'MPI TÃ¼bingen', 'LPS, Ã‰cole Normale SupÃ©rieure', 'The Ohio State University', 'Yahoo!', 'The Pennsylvania State University', 'CMU', 'Facebook AI Research'),\n  after = c('Stanford', 'Carnegie Mellon', 'Princeton', 'Google', 'Microsoft', 'University of Texas', 'NYU', 'Harvard', 'Google', 'Facebook', 'Cambridge', 'Stanford', 'IBM', 'Microsoft', 'IBM', 'Oxford', 'Duke University', 'MIT', 'University of Montreal', 'Yahoo', 'Adobe', 'University of Washington', 'University of Texas', 'Columbia University', 'INRIA', 'INRIA', 'University of Texas', 'University College London', 'Cornell University', 'University of Montreal', 'Google', 'McGill University', 'Chalmers University', 'Microsoft', 'Microsoft', 'Washington University in St. Louis', '', 'MIT', 'University of Toronto', 'Nokia', 'University of Illinois', 'University of Illinois', 'University of Michigan', 'Xerox', 'University of Texas', 'Microsoft', 'University of Michigan', 'Microsoft', 'Microsoft', 'Ecole Polytechnique Montreal', 'University de Saint-Etienne', 'Google', 'UC San Diego', 'Disney', 'INRIA', 'UT Sydney', 'UC Santa Barbara', 'Cambridge', 'Google', 'Telecom ParisTech', 'CIN', 'MIT', 'IBM', 'Washington University in St. Louis', 'Oxford', 'University of Montreal', 'INRIA', 'UPMC', 'Polytechnique Montreal', 'Duke University', 'UC Davis', 'Google', 'Princeton', 'Princeton', 'University of Washington', 'Google', 'University of Minnesota', 'Chalmers University', 'Microsoft', 'Rensselaer', 'UT Sydney', 'Rensselaer', 'University of London', 'University of Wisconsin-Madison', 'University of Washington', 'Rutgers', 'University of Texas', 'Rutgers', 'University of Wisconsin-Madison', 'University of Washington', 'Saarland University', 'Caltech', 'Samsung', 'Georgia Institute of Technology', 'MIT', 'Shell', 'Georgia Tech', 'Simons Foundation', 'Marburg University', 'University of Michigan', 'University of Montreal', 'MIT', 'Adobe', 'University Paris Dauphine', 'Athens University', 'University of Montreal', 'Stanford', 'University College London', 'Google', 'UC Davis', 'Johns Hopkins University', 'Telecom Paristech', 'Columbia University', 'CRIPAC', 'IBM', 'McGill University', 'University of Michigan', 'Microsoft', 'Yale University', 'University of Minnesota', 'CMLA', 'University of New South Wales', 'University of Sheffield', 'University of Tubingen', 'Colorado School of Mines', 'Harvard', 'Toyota Technological Institute at Chicago', 'MIT', 'University of Wisconsin-Madison', 'University of Wisconsin-Madison', 'Cambridge', 'UC Berkeley', 'University of Texas', 'University of Texas', 'University of Amsterdam', 'MPI', 'University of Michigan', 'University of Wisconsin-Madison', 'University of Wisconsin-Madison', 'MPI', 'Washington University in St. Louis', 'UC Berkeley', 'MPI', 'LPS', 'Ohio State University', 'Yahoo', 'University of Pennsylvania', 'Carnegie Mellon', 'Facebook'),\n  stringsAsFactors = F\n)\n\nauthors_with_affiliations %>%\n  left_join(institution_cleanup, by = c(\"Institution\" = \"before\")) %>%\n  mutate(Institution = coalesce(after, Institution)) %>%\n  select(-after) %>%\n  distinct ->\n  authors.affiliations\n\n\nauthors.affiliations %>%\n  group_by(Institution) %>%\n  summarise(Authors = n()) %>%\n  arrange(desc(Authors)) %>%\n  head(15) %>%\n  formattable(list(Authors = color_bar(\"orange\")), align = 'l')\n\n## Exploring private paper's\n\nprivate.companies <- c('Google', 'Microsoft', 'IBM', 'Facebook', 'Yahoo', 'Baidu', 'Adobe', 'SenseTime Group Limited', 'Gracenote', 'Xerox', 'Nokia', 'NVIDIA', 'Disney', 'Samsung', 'Shell', 'ZenRobotics', 'Epic Systems', 'Expedia, Geneva')\n# \n# Given that, we can ask questions like:\n#   \n# How many authors were there from for-profile companies?\n# How many papers did they publish?\n# Did private companies collaborate on papers?\n# Did they collaborate with academic institutions on those papers?\n",
    "created" : 1487428228393.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2029557733",
    "id" : "E22EA645",
    "lastKnownWriteTime" : 1487428257,
    "last_content_update" : 1487428257723,
    "path" : "C:/Users/lalit/Desktop/ADS_R -2/Demo.R",
    "project_path" : "Demo.R",
    "properties" : {
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}